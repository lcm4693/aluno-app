<!-- detalhar-aula.component.html -->
<span #topo tabindex="-10000"></span>
<form [formGroup]="form" class="p-fluid p-3">
  <div class="p-fluid p-3">
    <!-- Linha 1: Data -->
    <div class="flex flex-wrap mt-4 mb-4">
      <div class="basis-1/6 md:basis-1/6 pr-3">
        <label>Data da aula:</label>
        <p-calendar
          formControlName="dataAula"
          dateFormat="dd/mm/yy"
          [showIcon]="true"
          class="w-full"
          [readonlyInput]="true"
        ></p-calendar>
      </div>
    </div>

    <!-- Linha 2: Anotações e demais campos -->
    <div class="flex flex-wrap gap-4">
      <div class="flex-1 md:w-12" *ngIf="editando">
        <label for="anotacoes">Anotações:</label>
        <textarea
          pInputTextarea
          id="anotacoes"
          formControlName="anotacoes"
          rows="10"
          class="w-full"
          [ngClass]="{
            'ng-invalid ng-dirty':
              form.get('anotacoes')?.invalid && form.get('anotacoes')?.touched
          }"
        ></textarea>
        <small
          class="p-error"
          *ngIf="
            form.get('anotacoes')?.hasError('required') &&
            form.get('anotacoes')?.touched
          "
        >
          O campo Anotações é obrigatório</small
        >
      </div>
      <div class="flex-1 md:w-12" *ngIf="!editando">
        <p-panel class="w-full" header="Anotações">
          <div class="white-space-pre-line">
            {{ aula!.anotacoes || "—" }}
          </div>
        </p-panel>
      </div>

      <div class="flex-1 md:w-5" *ngIf="editando">
        <label for="campo1">Comentários do professor:</label>
        <textarea
          pInputTextarea
          id="comentarios"
          formControlName="comentarios"
          rows="5"
          class="w-full"
        ></textarea>
      </div>
      <div class="flex-1 md:w-5" *ngIf="!editando">
        <p-panel class="w-full" header="Comentários do professor">
          <div class="white-space-pre-line">
            {{ aula!.comentarios || "—" }}
          </div>
        </p-panel>
      </div>
      <div class="flex-1 md:w-5" *ngIf="editando">
        <label for="proxima-aula">Próxima aula:</label>
        <textarea
          pInputTextarea
          id="proxima-aula"
          formControlName="proximaAula"
          rows="5"
          class="w-full"
        ></textarea>
      </div>
      <div class="flex-1 md:w-5" *ngIf="!editando">
        <p-panel class="w-full" header="Próxima aula">
          <div class="white-space-pre-line">
            {{ aula!.proximaAula || "—" }}
          </div>
        </p-panel>
      </div>
    </div>

    <div class="flex justify-content-center gap-4 mt-4" *ngIf="editando">
      <p-button
        label="Salvar"
        icon="pi pi-check"
        class="p-button-primary"
        (onClick)="salvar()"
      ></p-button>
      <p-button
        label="Cancelar"
        icon="pi pi-times"
        [raised]="true"
        severity="secondary"
        (onClick)="onCancel()"
      ></p-button>
    </div>

    <div class="flex justify-content-center gap-4 mt-4" *ngIf="!editando">
      <p-button
        label="Editar"
        icon="pi pi-pencil"
        severity="primary"
        (onClick)="alterarFlagEdicao()"
      ></p-button>
      <p-button
        label="Fechar"
        icon="pi pi-times"
        [raised]="true"
        severity="secondary"
        (onClick)="fechar.emit()"
      ></p-button>
    </div>
  </div>
</form>
